extend type Query{
    products(type:String ,city_id:Int ,user_id:Int ,category_id:Int ,sub1_id:Int,colors:[Int],min_price:Float,max_price:Float,search:String,first:Int,page:Int):[Product] @paginate(builder:"App\\GraphQL\\Queries\\Products")
    product(id:ID!) : ProductDetails @field(resolver: "App\\GraphQL\\Queries\\Product@__invoke")
    myProducts(search:String):[Product] @paginate(builder:"App\\GraphQL\\Queries\\MyProducts") @guard
    tags(type:String!):[String]


}
type ProductDetails{
    product:Product
    products:[Product]
}
type Product{
    id:ID!,
    # Relations
    user:User @belongsTo
    city:City @belongsTo
    category:Category @belongsTo
    sub1:Category @belongsTo
    sub2:Category @belongsTo
    sub3:Category @belongsTo
    sub4:Category @belongsTo
    colors:[Color] @belongsToMany
    comments:[Comment] @hasMany(defaultCount:10,type:PAGINATOR)
    # Fields
    name:String,
    active:String
    info:String,
    expert:String,
    tags:[String]
    is_discount:Boolean
    is_delivary:Boolean
    is_available:Boolean
    level:String
    phone:String
    email:String
    address:String
    url:String
    longitude:String
    latitude:String
    price:Float
    discount:Float
    start_date:String
    end_date:String
    code:String
    type:String,
    views_count:Int
    turkey_price:TurkeyPrice  @field(resolver: "App\\GraphQL\\Resolvers\\TurkeyPrice@getTurkeyPrice")
    # Files From Media
    image:String @field(resolver: "App\\GraphQL\\Resolvers\\Image@getImage")
    video:String @field(resolver: "App\\GraphQL\\Resolvers\\Image@getVideo")
    images:[String] @field(resolver: "App\\GraphQL\\Resolvers\\Image@getImages")
    docs:[String] @field(resolver: "App\\GraphQL\\Resolvers\\Image@getDocs")
    liistOfImages:[DataImage] @field(resolver: "App\\GraphQL\\Resolvers\\Image@getImagesWithId")
    liistOfDocs:[DataImage] @field(resolver: "App\\GraphQL\\Resolvers\\Image@getDocsWithId")
    created_at:CustomDate

}
type TurkeyPrice{
    price:Float
    discount:Float
}
type DataImage{
    id:ID!
    url:String!
}

extend type Mutation {
    changeAvilable(id:ID!):Product @guard

    deleteProduct(id:ID!):Product
    createProduct(input:CreateProductInput) : Product @guard

    updateProduct(id:ID! ,input:updateProductInput) : Product @guard
    addSpecialProduct(id:ID!,level:String! @rules(apply:["required","in:normal,special"],messages:[
        {
            rule:"required",
            message:"حقل الرتبة مطلوب"
        }
        {
            rule:"in",
            message:"القيم المتاحة فقط [normal,special]"
        }
    ])):Product @guard
    #    deleteProduct(id:ID!) : Boolean @delete

    #    deletProductMedia(id:ID!) : Boolean @delete
}

input CreateProductInput{
    name:String @rules(apply: ["nullable","min:3"],messages:[
        {
            rule:"min",
            message:"يرجى إدخال 3 أحرف على الأقل"
        }
    ])
    city_id:Int @rules(apply: ["required","integer","exists:cities,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال المدينة"
        }
        {
            rule:"integer",
            message:"يرجى إدخال مدينة صالحة"
        }
        {
            rule:"exists",
            message:"يرجى إدخال مدينة صالحة"
        }
    ])
    image:Upload! @rules(apply:["required","image"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال الصورة"
        }
        {
            rule:"image",
            message:"يرجى إدخال صورة صالحة"
        }
    ])
    images:[Upload] @rulesForArray(apply:["image"],messages:[
        {
            rule:"image",
            message:"يرجى إدخال صورة صالحة"
        }
    ])

    video:String @rules(apply: ["nullable","string"],messages:[
        {
            rule:"string",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    info:String! @rules(apply: ["required","string"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال قيمة صالحة"
        }
        {
            rule:"string",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    tags:[String] @rules(apply: ["nullable"]) @rulesForArray(apply:["min:0"],messages:[
        {
            rule:"string",
            message:"يرجى إدخال قيمة نصية صالحة"
        }
    ]


    )

    is_available:Boolean @rules(apply: ["boolean"],messages:[
        {
            rule:"boolean",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    price:Float @rules(apply: ["required","numeric"],messages:[
        {
            rule:"numeric",
            message:"يرجى إدخال قيمة صالحة"
        }
        {
            rule:"required",
            message:"يرجى إدخال السعر"
        }
    ])
    is_discount:Boolean  @rules(apply: ["boolean"],messages:[
        {
            rule:"boolean",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    discount:Float  @rules(apply: ["required_if:is_discount,true","numeric"],messages:[

        {
            rule:"required_if",
            message:"يرجى إدخال سعر العرض"
        }
    ])
    category_id:Int!  @rules(apply: ["required","integer","exists:categories,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال التصنيف الرئيسي"
        }
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub1_id:Int! @rules(apply: ["required","integer","exists:categories,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال التصنيف الفرعي"
        }
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub2_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub3_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub4_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    options:[Int]
    #    write:
    attribute:[Int]
}

input updateProductInput{
    name:String @rules(apply: ["nullable","min:3"],messages:[
        {
            rule:"min",
            message:"يرجى إدخال 3 أحرف على الأقل"
        }
    ])
    city_id:Int @rules(apply: ["required","integer","exists:cities,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال المدينة"
        }
        {
            rule:"integer",
            message:"يرجى إدخال مدينة صالحة"
        }
        {
            rule:"exists",
            message:"يرجى إدخال مدينة صالحة"
        }
    ])
    image:Upload @rules(apply:["nullable","image"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال الصورة"
        }
        {
            rule:"image",
            message:"يرجى إدخال صورة صالحة"
        }
    ])
    images:[Upload] @rules(apply:["nullable"]) @rulesForArray(apply:["image"],messages:[
        {
            rule:"image",
            message:"يرجى إدخال صورة صالحة"
        }
    ])

    video:String @rules(apply: ["nullable","string"],messages:[
        {
            rule:"string",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    info:String! @rules(apply: ["required","string"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال قيمة صالحة"
        }
        {
            rule:"string",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    tags:[String] @rules(apply: ["nullable"]) @rulesForArray(apply:["min:0"],messages:[
        {
            rule:"string",
            message:"يرجى إدخال قيمة نصية صالحة"
        }
    ]


    )

    is_available:Boolean @rules(apply: ["boolean"],messages:[
        {
            rule:"boolean",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    price:Float @rules(apply: ["required","numeric"],messages:[
        {
            rule:"numeric",
            message:"يرجى إدخال قيمة صالحة"
        }
        {
            rule:"required",
            message:"يرجى إدخال السعر"
        }
    ])
    is_discount:Boolean  @rules(apply: ["boolean"],messages:[
        {
            rule:"boolean",
            message:"يرجى إدخال قيمة صالحة"
        }
    ])
    discount:Float  @rules(apply: ["required_if:is_discount,true","numeric"],messages:[

        {
            rule:"required_if",
            message:"يرجى إدخال سعر العرض"
        }
    ])
    category_id:Int!  @rules(apply: ["required","integer","exists:categories,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال التصنيف الرئيسي"
        }
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub1_id:Int! @rules(apply: ["required","integer","exists:categories,id"],messages:[
        {
            rule:"required",
            message:"يرجى إدخال التصنيف الفرعي"
        }
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub2_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub3_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    sub4_id:Int @rules(apply: ["nullable","integer","exists:categories,id"],messages:[
        {
            rule:"integer",
            message:"يرجى إدخال تصنيف صالح"
        }
        {
            rule:"exists",
            message:"يرجى إدخال تصنيف صالح"
        }
    ])
    options:[Int]
    #    write:
    attribute:[Int]
}

